{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","service/fetchApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","service/mapper.js","index.js"],"names":["module","exports","fetchApi","onSearch","page","axios","get","then","r","data","hits","propTypes","PropTypes","string","isRequired","number","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","className","cs","SearchForm","e","preventDefault","trim","toast","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","target","value","toLowerCase","ImageGalleryItem","webformatURL","id","openImage","largeImageURL","onClick","src","alt","ImageGalleryItemImage","ImageGallery","map","Button","rootModal","document","querySelector","Modal","onClose","children","firstRender","useRef","useEffect","console","log","window","addEventListener","handleKeyDown","current","removeEventListener","code","createPortal","Overlay","currentTarget","App","images","setImages","setPage","error","setError","status","setStatus","viewModal","setViewModal","modalImage","setModalImage","getImages","query","imgs","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","style","fontWeight","fontSize","textAlign","length","largeImage","i","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fa9da456.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1-oSf\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__34kgd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__f0PEm\",\"Modal\":\"Modal_Modal__34CbL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3VQwh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__29TnB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1ULwO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__vu6Vt\",\"SearchForm\":\"Searchbar_SearchForm__3XS0y\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__21Pvo\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__2ZJtp\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2eaGT\"};","// import { createClient } from 'pexels';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst fetchApi = (onSearch, page) => {\r\n    const KEY = '23540071-e77d0cd4225c02caa21321106';\r\n    const BASE_URL = 'https://pixabay.com/api/';\r\n    return axios.get(`${BASE_URL}?q=${onSearch}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`).then(r => r.data.hits);\r\n};\r\n\r\n// const fetchApi = (onSearch, page) => {\r\n//     const client = createClient('563492ad6f9170000100000187edd7a1e3164e24b88262e5ea6f2f2b');\r\n//     const query = onSearch;\r\n\r\n//     return client.photos.search({ query, page: page, per_page: 12 }).then(photos => photos.json());\r\n// };\r\n\r\n// const fetchApi = (onSearch, page) => {\r\n//     const KEY = 'a92e1c28ff5839246667e5b68c28f141';\r\n//     const BASE_URL = 'https://api.themoviedb.org/3/';\r\n//     const language = 'en-US';\r\n//     return axios.get(`${BASE_URL}search/movie?api_key=${KEY}&language=${language}&page=${page}&per_page=12&include_adult=false&query=${onSearch}`).then(r => r.data.results);\r\n// };\r\nfetchApi.propTypes = {\r\n    onSearch: PropTypes.string.isRequired,\r\n    page: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default fetchApi;\r\n","import { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport cs from \"./Searchbar.module.css\";\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const imageChange = (e) => {\r\n    setSearchQuery(e.target.value.toLowerCase());\r\n  };\r\n\r\n  const imageSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (searchQuery.trim() === \"\") {\r\n      toast.warn(\"Введите запрос!\", {\r\n        position: \"top-right\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      return;\r\n    }\r\n    onSubmit(searchQuery);\r\n    setSearchQuery(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header className={cs.Searchbar}>\r\n        <form className={cs.SearchForm} onSubmit={imageSubmit}>\r\n          <button type=\"submit\" className={cs.SearchFormBtn}>\r\n            <span className={cs.SearchFormBtnLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={cs.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={imageChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    </>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\n// export default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./ImageGalleryItem.module.css\";\r\n// import Modal from \"../Modal/Modal\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, id, openImage, largeImageURL }) => {\r\n  return (\r\n    <li\r\n      className={cs.ImageGalleryItem}\r\n      key={id}\r\n      onClick={() => {\r\n        openImage(largeImageURL);\r\n      }}\r\n    >\r\n      <img src={webformatURL} alt=\"\" className={cs.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  id: PropTypes.number.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  openImage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./ImageGallery.module.css\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ onSearch, openImage }) => {\r\n  return (\r\n    <>\r\n      <ul className={cs.ImageGallery}>\r\n        {onSearch.map(({ webformatURL, id, largeImageURL }) => (\r\n          <>\r\n            <ImageGalleryItem\r\n              webformatURL={webformatURL}\r\n              id={id}\r\n              largeImageURL={largeImageURL}\r\n              openImage={openImage}\r\n            />\r\n          </>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  openImage: PropTypes.func.isRequired,\r\n  onSearch: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    })\r\n  ),\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <>\r\n      <button type=\"button\" className={cs.Button} onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./Modal.module.css\";\r\n\r\nconst rootModal = document.querySelector(\"#rootModal\");\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  const firstRender = useRef(true);\r\n\r\n  useEffect(() => {\r\n    console.log(\"component did mount\");\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (firstRender.current) {\r\n      firstRender.current = false;\r\n    }\r\n    console.log(\"component will unmount\");\r\n    window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [onClose]);\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={cs.Overlay} onClick={handleBackdropClick}>\r\n      <div className={cs.Modal}>{children}</div>\r\n    </div>,\r\n    rootModal\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  src: PropTypes.string.isRequired,\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport cs from './App.module.css';\r\nimport { mapper } from \"./service/mapper\";\r\nimport fetchApi from \"./service/fetchApi\";\r\nimport Searchbar from './components/Searchbar/Searchbar';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport Button from './components/Button/Button';\r\nimport Modal from './components/Modal/Modal';\r\n\r\nexport default function App() {\r\n  const [images, setImages] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [error, setError] = useState('');\r\n  const [status, setStatus] = useState('idle');\r\n  const [viewModal, setViewModal] = useState(false);\r\n  const [modalImage, setModalImage] = useState('');\r\n\r\n  useEffect(() => {\r\n    setImages([]);\r\n    getImages(searchQuery, page);\r\n  }, [searchQuery])\r\n\r\n  useEffect(() => {\r\n    getImages(searchQuery, page);\r\n  }, [page])\r\n\r\n  const getImages = (query, page) => {\r\n    setStatus('pending');\r\n    fetchApi(query, page)\r\n    .then((hits) => {\r\n        setImages([...images, mapper(hits)]);\r\n        setStatus('resolved');\r\n      })\r\n    .catch(({message}) => {\r\n      setError(message);\r\n      setStatus('rejected'); \r\n    })\r\n    .finally(() => {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    });\r\n  };\r\n\r\n  const loadMore = e => {\r\n    e.preventDefault();\r\n    setPage(i => i + 1);\r\n  }\r\n\r\n  const formSubmit = query => {\r\n    setSearchQuery(query);\r\n    setPage(1);\r\n  }\r\n\r\n  const toggleModal = () => {\r\n    setViewModal(!viewModal);\r\n\r\n  };\r\n\r\n  const openImage = (largeImage) => {\r\n    setModalImage(largeImage);\r\n    toggleModal();\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div className={cs.App}>\r\n      <Searchbar onSubmit={formSubmit}/>\r\n      {(status === 'idle') &&\r\n        <div style={{fontWeight: '500', fontSize: '30px', textAlign: 'center'}}>Введите название</div>\r\n      }\r\n      {(status === 'rejected') &&\r\n        <div style={{fontWeight: '700', fontSize: '50px', textAlign: 'center'}}>{error}</div>\r\n      }\r\n      {(images.length > 0) && \r\n        <>\r\n          <ImageGallery onSearch={images} openImage={openImage} />\r\n          <Button onClick={loadMore} page={page} />\r\n        </>\r\n      }\r\n      {(status === \"pending\") && \r\n        <Loader\r\n          type=\"Puff\"\r\n           color=\"#00BFFF\"\r\n           height={100}\r\n           width={100}\r\n           timeout={3000} //3 secs\r\n        />\r\n      }\r\n      {viewModal && (\r\n        <Modal onClose={toggleModal}>\r\n          <img src={modalImage} alt='' />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n    </>\r\n  )\r\n};\r\n","export const mapper = (imgs) => {\r\n\treturn imgs.map(({ id, webformatURL, largeImageURL }) => ({\r\n\t\tid, webformatURL, largeImageURL\r\n\t}));\r\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}